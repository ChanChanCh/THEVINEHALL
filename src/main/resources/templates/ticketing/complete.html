<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>예매완료</title>
    <script src="https://js.tosspayments.com/v1/payment"></script>
</head>
<body>
<h1>예매완료 되었습니다.</h1>
<!--<form action="/payment/ticketing">-->
<!--    <div>-->
<!--        <button type="submit">결제하기</button>-->
<!--    </div>-->
<!--</form>-->
<button type="button" id="payment-button">결제하기</button>

<script>
    let paymentButton = document.getElementById("payment-button");
    paymentButton.addEventListener("click", handlePayment);

    function handlePayment() {
        let clientKey = 'test_ck_D5GePWvyJnrK0W0k6q8gLzN97Eoq'
        let tossPayments = TossPayments(clientKey) // 클라이언트 키로 초기화하기

        tossPayments.requestPayment('카드', { // 결제 수단 파라미터
            // 필수 결제 정보 파라미터
            amount: 15000, /*좌석 수 * 공연가격 값 넣기*/
            orderId: '8IduJaIbK2_IzVekt1eGe', /*난수 주기?*/
            orderName: '토스 티셔츠 외 2건', /*공연제목넣기*/
            successUrl: 'http://localhost:8080/payment/success',
            failUrl: 'http://localhost:8080/payment/fail',
        })
            .catch(function (error) {
                if (error.code === 'USER_CANCEL') {
                    // 결제 고객이 결제창을 닫았을 때 에러 처리
                } else if (error.code === 'INVALID_CARD_COMPANY') {
                    // 유효하지 않은 카드 코드에 대한 에러 처리
                }
            })
    }
</script>
</body>
</html>